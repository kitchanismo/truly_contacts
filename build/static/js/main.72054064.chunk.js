(this["webpackJsonpcra-type"]=this["webpackJsonpcra-type"]||[]).push([[0],{151:function(e,t,n){e.exports={container:"signin_container__9wU1h"}},152:function(e,t,n){e.exports={container:"signup_container__TKjfY"}},153:function(e){e.exports=JSON.parse('{"a":"https://truly-contacts.herokuapp.com/api/"}')},217:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(58),s=n.n(o),i=n(56),l=n(234),u=n(240),j=n(92),d=n.n(j),b=n(13),m=c.a.createContext(null),h=n(11),x=n(236),O=n(25),p=n.n(O),f=n(148),g=function(e){return p.a.string().label(e).regex(/^[A-Za-z\s]*$/).error((function(t){return t.forEach((function(t){switch(t.code){case"any.empty":t.message='"'.concat(e,'" is not allowed to be empty');break;case"string.pattern.base":t.message='"'.concat(e,'" must not have a number or special character')}})),t}))},v=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},_=function(){var e=localStorage.getItem("access-token");try{if(e)return Object(f.a)(e)}catch(t){return null}},C=function(){var e=Object(h.g)(),t=r.useContext(m),n=t.isUserAuthenticated,c=t.onSignout,o=t.currentUser,s=r.useState(),i=Object(b.a)(s,2),l=i[0],u=i[1];r.useEffect((function(){u(e.location.pathname.substring(1))}),[]);var j=function(t,n){u(n.name),e.push("/"+n.name)};return Object(a.jsxs)(x.a,{color:"purple",pointing:!0,secondary:!0,children:[Object(a.jsx)(x.a.Item,{name:"home",active:"home"===l,onClick:j,children:"Home"}),n?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(x.a.Menu,{position:"right",children:[Object(a.jsx)(x.a.Item,{color:"purple",name:"contacts",active:"contacts"===l,onClick:j,children:"Contacts"}),Object(a.jsx)(x.a.Item,{color:"purple",children:v(o())}),Object(a.jsx)(x.a.Item,{position:"right",name:"logout",active:"logout"===l,onClick:function(){c(),e.replace("/")},children:"Logout"})]})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a.Item,{position:"right",name:"signin",active:"signin"===l,onClick:j,children:"Sign In"}),Object(a.jsx)(x.a.Item,{name:"signup",active:"signup"===l,onClick:j,children:"Sign Up"})]})]})},S=n(14),y=n(115),w=function(e){e.path;var t=e.component,n=e.render,c=Object(y.a)(e,["path","component","render"]),o=Object(r.useContext)(m).isUserAuthenticated;return Object(a.jsx)(h.b,Object(S.a)(Object(S.a)({},c),{},{render:function(e){return o?t?Object(a.jsx)(t,Object(S.a)({},e)):null===n||void 0===n?void 0:n.call(null,e):Object(a.jsx)(h.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},k=function(e){e.path;var t=e.component,n=e.render,c=Object(y.a)(e,["path","component","render"]),o=Object(r.useContext)(m).isUserAuthenticated;return Object(a.jsx)(h.b,Object(S.a)(Object(S.a)({},c),{},{render:function(e){return o?Object(a.jsx)(h.a,{to:{pathname:"/",state:{from:e.location}}}):t?Object(a.jsx)(t,Object(S.a)({},e)):null===n||void 0===n?void 0:n.call(null,e)}}))},I=n(241),A=n(88),N=n(151),U=n.n(N),E=n(110),F=n(235),H=n(220),P=n(238),R=n(63),q=function(e){return Object(a.jsxs)(P.a,{color:e.color||"blue",icon:!0,children:[Object(a.jsx)(R.a,{name:e.icon||"circle notched",loading:e.loading||!1}),Object(a.jsxs)(P.a.Content,{children:[Object(a.jsx)(P.a.Header,{children:e.header||"Just a second"}),e.children]})]})};var B=function(e){var t,n=Object(b.a)(e.state,2),r=n[0],o=n[1],s=c.a.useState(!1),i=Object(b.a)(s,2),l=i[0],u=i[1],j=c.a.useState(!1),m=Object(b.a)(j,2),h=m[0],x=m[1],O=c.a.useState(!1),f=Object(b.a)(O,2),g=f[0],v=f[1],_=c.a.useState(e.rejectMessage||""),C=Object(b.a)(_,2),y=C[0],w=C[1],k=c.a.useState(),I=Object(b.a)(k,2),A=I[0],N=I[1],U=function(e){var t=e.currentTarget,n=t.value,a=t.name;o(Object(S.a)(Object(S.a)({},r),{},Object(E.a)({},a,n)))};return Object(a.jsxs)(F.a,{onSubmit:function(t){t.preventDefault();var n=function(){var t=p.a.object(e.validator).options({abortEarly:!1}).validate(r).error;if(!t)return null;var n={};return t.details.forEach((function(e){return n[e.path[0]]=e.message})),n}();return u(!0),x(!1),v(!1),n?(N(n),void u(!1)):e.onSubmit().then((function(){N({}),e.clearOnSubmit&&o({}),u(!1),x(!0),v(!1)})).catch((function(e){u(!1),v(!0),x(!1),w(e.message)}))},className:d.a.formContainer,children:[l&&Object(a.jsx)(q,{loading:!0,children:e.loadingMessage||"Loading...."}),h&&Object(a.jsx)(q,{color:"green",icon:"check circle",header:"Done!",children:e.resolveMessage||"Thank you..."}),g&&Object(a.jsx)(q,{color:"red",icon:"warning circle",header:"Warning!",children:y}),null===(t=e.children)||void 0===t?void 0:t.call(null,{myInput:function(e){return Object(a.jsx)(F.a.Field,{children:Object(a.jsx)(F.a.Input,{type:e.type||"text",value:e.value||"",onChange:U,name:e.name,placeholder:e.placeholder,label:e.label,error:A&&A[e.name]&&{content:A[e.name],pointing:"above"}})},e.name)},myButton:function(){return Object(a.jsx)(H.a,{fluid:!0,disabled:l,color:"black",type:"submit",children:"Submit"})}})]})},z={username:p.a.string().alphanum().min(1).max(150).required().label("Username"),first_name:p.a.optional(),last_name:p.a.optional(),email:p.a.optional(),password:p.a.string().min(8).max(65).required().label("Password")},M=function(){var e=Object(h.g)(),t=r.useContext(m),n=t.state,c=t.onSignin,o=Object(b.a)(n,2),s=o[0],i=o[1],l={state:n,validator:z,onSubmit:function(){return c(s).then((function(t){200===t&&(i({}),e.replace("/contacts"))})).catch((function(e){var t;if(401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))throw Error(e.response.data.detail);throw e}))},loadingMessage:"Validating..."};return Object(a.jsx)(u.a.Column,{className:U.a.container,children:Object(a.jsxs)(I.a,{raised:!0,children:[Object(a.jsx)(A.a,{as:"a",color:"purple",size:"large",ribbon:!0,children:"Sign In"}),Object(a.jsx)(B,Object(S.a)(Object(S.a)({},l),{},{children:function(e){var t=e.myInput,n=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({value:s.username,name:"username",label:"Username"}),t({value:s.password,type:"password",name:"password",label:"Password"}),n()]})}}))]})})},L={username:p.a.string().alphanum().min(1).max(150).required().label("Username"),first_name:g("Firstname").min(2).max(255).required(),last_name:g("Lastname").min(2).max(255).required(),email:p.a.string().email({minDomainSegments:2,tlds:{allow:["com","net"]}}).max(254).label("Email"),password:p.a.string().min(8).max(65).required().label("Password")},T=n(152),J=n.n(T),D=function(){var e=r.useContext(m),t=e.state,n=e.onRegister,c=Object(b.a)(t,2),o=c[0],s=c[1],i={state:t,onSubmit:function(){return n(o).then((function(e){201===e&&s({})})).catch((function(e){var t;if(400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var n=e.response.data.username?e.response.data.username[0]:e.response.data.email[0];throw Error(n)}throw e}))},validator:L,resolveMessage:"You may now signin..."},l=[{value:o.username,name:"username",label:"Username"},{value:o.first_name,name:"first_name",label:"Firstname"},{value:o.last_name,name:"last_name",label:"Lastname"},{value:o.email,type:"email",name:"email",label:"Email"},{value:o.password,type:"password",name:"password",label:"Password"}];return Object(a.jsx)(u.a.Column,{className:J.a.container,children:Object(a.jsxs)(I.a,{raised:!0,children:[Object(a.jsx)(A.a,{as:"a",color:"purple",size:"large",ribbon:!0,children:"Register"}),Object(a.jsx)(B,Object(S.a)(Object(S.a)({},i),{},{children:function(e){var t=e.myInput,n=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[l.map((function(e){return t(e)})),n()]})}}))]})})},K=function(){return Object(a.jsx)("h1",{children:"Home"})},G=c.a.createContext(null),W=n(237),Y=n(154),V=n(242),Z=n(232),$=n(233),Q=n(90),X=n.n(Q),ee=function(){var e=r.useContext(G),t=e.getContacts,n=e.searchContacts,c=Object(b.a)(e.state,1)[0],o=r.useState(""),s=Object(b.a)(o,2),i=s[0],l=s[1],j=r.useState([]),d=Object(b.a)(j,2),m=d[0],h=d[1];r.useEffect((function(){t().then((function(e){h(e)}))}),[]),r.useEffect((function(){h(n(i))}),[i]);var x=function(e){var t=e?"heart":"heart outline";return Object(a.jsx)(R.a,{color:"red",name:t})};return Object(a.jsxs)(u.a.Column,{className:X.a.container,children:[Object(a.jsxs)(u.a.Row,{className:X.a.addSearch,children:[Object(a.jsx)($.a,{size:"small",onChange:function(e){return l(e.currentTarget.value)},value:i,placeholder:"Search..."}),Object(a.jsxs)("span",{children:[Object(a.jsx)(H.a,{onClick:function(){return h(c)},content:"Refresh",icon:"refresh",labelPosition:"left"}),Object(a.jsx)(H.a,{color:"purple",content:"Add",icon:"add",labelPosition:"left"})]})]}),m.length>0&&Object(a.jsxs)(W.a,{textAlign:"center",className:X.a.table,basic:"very",celled:!0,children:[Object(a.jsx)(W.a.Header,{children:Object(a.jsxs)(W.a.Row,{children:[Object(a.jsx)(W.a.HeaderCell,{children:"Photo"}),Object(a.jsx)(W.a.HeaderCell,{children:"Name / Number"}),Object(a.jsx)(W.a.HeaderCell,{children:"Country"}),Object(a.jsx)(W.a.HeaderCell,{children:"Favorite"}),Object(a.jsx)(W.a.HeaderCell,{children:"Actions"})]})}),Object(a.jsx)(W.a.Body,{className:X.a.body,children:Object(a.jsx)(a.Fragment,{children:m.map((function(e){return Object(a.jsxs)(W.a.Row,{children:[Object(a.jsx)(W.a.Cell,{textAlign:"center",children:Object(a.jsx)(Y.a,{src:e.contact_picture,rounded:!0,size:"mini"})}),Object(a.jsx)(W.a.Cell,{children:Object(a.jsx)(V.a,{as:"h4",image:!0,children:Object(a.jsxs)(V.a.Content,{children:["".concat(v(e.last_name),", ").concat(v(e.first_name)),Object(a.jsx)(V.a.Subheader,{children:e.phone_number})]})})}),Object(a.jsx)(W.a.Cell,{textAlign:"center",children:Object(a.jsx)(Z.a,{name:e.country_code})}),Object(a.jsx)(W.a.Cell,{textAlign:"center",children:x(e.is_favorite)}),Object(a.jsx)(W.a.Cell,{textAlign:"center",children:Object(a.jsxs)(H.a.Group,{children:[Object(a.jsx)(H.a,{basic:!0,icon:!0,children:Object(a.jsx)(R.a,{name:"eye",color:"blue"})}),Object(a.jsx)(H.a,{basic:!0,icon:!0,children:Object(a.jsx)(R.a,{name:"pencil",color:"yellow"})}),Object(a.jsx)(H.a,{basic:!0,icon:!0,children:Object(a.jsx)(R.a,{name:"trash",color:"red"})})]})})]},e.id)}))})})]})]})},te=function(){return Object(a.jsx)("h1",{children:"Not Found"})},ne=function(){return Object(a.jsxs)(h.d,{children:[Object(a.jsx)(w,{path:"/contacts",component:ee}),Object(a.jsx)(k,{path:"/signup",component:D}),Object(a.jsx)(k,{path:"/signin",component:M}),Object(a.jsx)(h.b,{path:"/home",component:K}),Object(a.jsx)(h.b,{path:"/not-found",component:te}),Object(a.jsx)(h.a,{from:"/",exact:!0,to:"/home"}),Object(a.jsx)(h.a,{to:"/not-found"})]})},ae=n(53),re=n.n(ae),ce=n(153);re.a.interceptors.request.use((function(e){return e.baseURL=ce.a,e.withCredentials=!1,e.headers={"Access-Control-Allow-Origin":"*"},localStorage.getItem("access-token")&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access-token"))),e})),re.a.interceptors.response.use((function(e){return e}),(function(e){if("Network Error"===e.message)throw Error(e.message);throw e}));var oe={get:re.a.get,post:re.a.post,put:re.a.put,delete:re.a.delete,axios:re.a},se=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1];return{state:[n,a],getContacts:function(){return oe.get("/contacts/").then((function(e){return a(e.data),e.data})).catch((function(e){return console.log(e),[]}))},searchContacts:function(e){return n.filter((function(t){return t.first_name.includes(e)||t.last_name.includes(e)}))}}},ie=function(){var e=r.useState({username:"xxxxxxxx",first_name:"ddsd",last_name:"dsd",email:"sd@gmail.com",password:"xxxxxxxx"}),t=r.useState(!!_()),n=Object(b.a)(t,2),a=n[0],c=n[1];return{currentUser:function(){var e;return null===(e=_())||void 0===e?void 0:e.username},onSignout:function(){localStorage.removeItem("access-token"),c(!1)},isUserAuthenticated:a,onRegister:function(e){return oe.post("/auth/register",e).then((function(e){return e.status}))},onSignin:function(e){return oe.post("/auth/login",e).then((function(e){return localStorage.setItem("access-token",e.data.token),c(!0),e.status}))},state:e}},le=function(e){var t=ie(),n=se();return Object(a.jsx)(m.Provider,{value:Object(S.a)({},t),children:Object(a.jsx)(G.Provider,{value:Object(S.a)({},n),children:e.children})})},ue=function(e){return Object(a.jsxs)(le,{children:[Object(a.jsx)(C,{}),Object(a.jsx)(l.a,{fluid:!0,children:Object(a.jsx)(u.a,{verticalAlign:"top",centered:!0,className:d.a.container,children:Object(a.jsx)(ne,{})})})]})};n(217),n(218);s.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(ue,{})}),document.getElementById("root"))},90:function(e,t,n){e.exports={container:"contacts_container__PHKas",table:"contacts_table__3scnR",body:"contacts_body__2-gdK",addSearch:"contacts_addSearch__poWGb",search:"contacts_search__csb2I"}},92:function(e,t,n){e.exports={container:"styles_container__nIBNm",formContainer:"styles_formContainer__1dx3T"}}},[[219,1,2]]]);
//# sourceMappingURL=main.72054064.chunk.js.map